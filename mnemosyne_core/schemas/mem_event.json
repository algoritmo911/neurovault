{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Memory Event",
  "description": "Schema for a single memory event ingested into the system.",
  "type": "object",
  "properties": {
    "source": {
      "description": "The origin of the memory event.",
      "type": "string",
      "enum": ["telegram", "github", "notes", "n8n", "system"]
    },
    "ts": {
      "description": "The timestamp of the event in ISO 8601 format.",
      "type": "string",
      "format": "date-time"
    },
    "author": {
      "description": "The author of the event.",
      "type": "string",
      "enum": ["user", "agent", "system"]
    },
    "payload": {
      "description": "The main content of the event.",
      "type": "object",
      "properties": {
        "text": {
          "type": "string"
        },
        "meta": {
          "type": "object",
          "additionalProperties": true
        },
        "attachments": {
          "type": "array"
        }
      },
      "required": ["text"]
    },
    "provenance": {
      "description": "The detailed origin of the event, for traceability.",
      "type": "object",
      "properties": {
        "repo": {
          "type": "string"
        },
        "branch": {
          "type": "string"
        },
        "commit": {
          "type": "string"
        }
      }
    }
  },
  "required": ["source", "ts", "author", "payload"]
}
